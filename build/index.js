// @bun
var A=()=>({handler:{},middleware:[],staticChildren:{}}),z=A();var X=function(P){let v=z;const T=P.split("/").filter(Boolean),b={};for(let j of T)if(v=Y(v,j,b),!v)return{node:null};return{node:v,params:b}},Y=function(P,v,T){if(P.staticChildren[v])return P.staticChildren[v];if(P.dynamicChild)return T[P.dynamicChild.dynamicName]=v,P.dynamicChild;else return null},Q=(P,v)=>{const{node:T,params:b}=X(P);if(!T||!T.handler||!T.handler[v])return null;return{handler:T.handler[v],middleware:T.middleware,params:b}};var L=async(P)=>{const v=new URL(P.url),T=Q(v.pathname,P.method);if(!T)return new Response(`Path: '${v.pathname}' not found in the Igloo Router`,{status:404,statusText:"Not Found"});if(typeof T.handler==="function"){for(let b of T.middleware)if(typeof b==="function")await b(P);return T.handler(P,T.params)}return new Response(JSON.stringify({pathname:v.pathname,route:T}))};function V(P,v,T,b){let j=z;const I=v.split("/").filter(Boolean);for(let f of I)j=Z(j,f);for(let f of P)$(j,f,v),j.handler[f]=b;j.middleware=T}var Z=function(P,v){if(v[0]===":")_(P,v),P.dynamicChild=P=A(),P.dynamicName=v.slice(1);else P=P.staticChildren[v]??=A();return P},_=function(P,v){if(P.dynamicChild)throw new Error(`Cannot have multiple of the same path. Segment:${v}`)},$=function(P,v,T){if(P.handler[v])throw new Error(`Cannot have multiple of the same path. Path:${T}`)};var J=(P,v="",T=!1)=>{let b=[];const j=Object.keys(P.staticChildren).sort();for(let f of j)b=b.concat(J(P.staticChildren[f],`${v}/${f}`));if(P.dynamicChild){const f=P.dynamicChild.dynamicName;b=b.concat(J(P.dynamicChild,`${v}/:${f}`,!0))}const I=Object.keys(P.handler).sort();return b=b.concat(I.map((f)=>({method:f,path:v||"/",isDynamic:T}))),b},w=()=>{const P=J(z);for(let v of P)console.log(`${v.method} ${v.path}`)};var x=(P,v,T,b)=>{V([P],v,T,b)},G=(P)=>{return(v,...T)=>{const b=T.pop();x(P,v,T,b)}},B={get:G("GET"),post:G("POST"),delete:G("DELETE"),put:G("PUT")};export{B as router,z as root,w as printRoutes,J as listRoutes,L as handler,Q as findRoute,A as createNode,V as addRoute};

//# debugId=AA6245C309DFE46C64756e2164756e21
